<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="html/html; charset=utf-8" />
		<title>Building Libraries Document</title>
		<meta id="xcode-display" name="xcode-display" content="render"/>
		<meta name="viewport" content="width=550" />
		<link rel="stylesheet" type="text/css" href="../../css/styles.css" media="all" />
		<link rel="stylesheet" type="text/css" media="print" href="../../css/stylesPrint.css" />	
		<meta name="generator" content="appledoc 2.1 (build 858)" />
	</head>
	<body>
		<header id="top_header">
			<div id="library" class="hideInXcode">
				<h1><a id="libraryTitle" href="../index.html">CurlHandle </a></h1>
				<a id="developerHome" href="../index.html">Karelia Systems</a>
			</div>
			
			<div id="title" role="banner">
				<h1 class="hideInXcode" id="pageTitleHeader">Building Libraries Document</h1>
			</div>
			<ul id="headerButtons" role="toolbar"></ul>
		</header>
		<article>
			<a title="Building Libraries Document" name="top"></a>
			<div id="overview_contents" role="main">
				<div id="container">	
					<p>Building libraries</p>

<p>CURLHandle uses its own builds of libcurl, libcares, libcrypto, libssl and libssh2.</p>

<p>The good news is that we commit built versions of these to either this git repo or one of the submodule repos.</p>

<p>So in normal use, you shouldn&rsquo;t need to worry about this, and can stop reading now.</p>

<p>However, should you find yourself needing to rebuild these libraries for some reason, this is how you do it.</p>

<h2>Install Tools</h2>

<p>Homebrew</p>

<pre><code>brew update
brew install automake (if it's not already installed)
brew versions automake (we want to use ver. 1.12.6)
cd /usr/local/Library/Formula/
git checkout 3a7567c /usr/local/Library/Formula/automake.rb
brew unlink automake
brew install automake (should show ver 1.12.6 installing)
(also note the cool beer mug emoji when brew is done :-P )
</code></pre>

<h2>Fetch Code</h2>

<p>git</p>

<pre><code>git checkout "v4.x-beta"
git submodule update --recursive
    (new commits in CurlHandle and SFTP leave the library build dirs in place to allow debugging)
</code></pre>

<h2>Build</h2>

<h3>Using Xcode</h3>

<pre><code>OpenSSL - libcrypto, libssl
    open SFTP/OpenSSL.xcodeproj
    build target openssl   (with Product / Build For / Archiving)
libssh2
    open SFTP/libssh2.xcodeproj
    build target libssh2   (for archiving)
libcurl, libcares
    open CURLHandleSource/CURLHandle.xcodeproj
    build target libcurl   (for archiving)
</code></pre>

<h3>From the command line</h3>

<pre><code>cd &lt;the root of the project&gt;
Scripts/build-libs.sh
</code></pre>

<h2>Debugging</h2>

<p>Because of the vaguaries of the way these libraries are built, Xcode has trouble locating the source files when you&rsquo;re debugging, even though we do commit the dSYM files.</p>

<p>This is one reason why you might find yourself wanting to build the libraries locally &ndash; as long as the built objects etc are hanging around on your machine, Xcode should find the source ok.</p>

<p>Ideally we&rsquo;ll figure out how to fix things so that this isn&rsquo;t necessary.</p>

<p>On the other hand, ideally you won&rsquo;t need to debug the internals of these libraries.</p>
				</div>
				<div id="footer">
					<hr />
					<div class="footer-copyright">
						<p><span class="copyright">&copy; 2013 Karelia Systems. All rights reserved. (Last updated: 2013-04-12)</span><br />
						
						<span class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.1 (build 858)</a>.</span></p>
						
					
					</div>
				</div>
			</div>
		</article>
	</body>
</html>